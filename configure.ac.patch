--- configure.ac.orig	2012-08-03 02:45:08.000000000 +0400
+++ configure.ac	2012-08-28 12:52:34.000000000 +0400
@@ -15,6 +15,8 @@
 AC_PREFIX_DEFAULT([/usr/local/modsecurity])
 
 AM_INIT_AUTOMAKE([-Wall -Werror foreign])
+AM_PROG_AR
+LT_INIT
 
 LT_PREREQ([2.2])
 LT_INIT([dlopen])
@@ -29,6 +31,7 @@
 AC_PROG_GREP
 AC_PATH_PROGS(PERL, [perl perl5], )
 AC_PATH_PROGS(ENV_CMD, [env printenv], )
+AM_PROG_CC_C_O
 
 # Checks for header files.
 AC_HEADER_STDC
--- ./build/find_apr.m4.orig	2012-08-03 02:45:08.000000000 +0400
+++ ./build/find_apr.m4	2012-08-28 14:18:55.000000000 +0400
@@ -61,7 +61,7 @@
     if test "$verbose_output" -eq 1; then AC_MSG_NOTICE(apr CPPFLAGS: $APR_CPPFLAGS); fi
     APR_LDFLAGS="`${APR_CONFIG} --libs`"
     if test "$verbose_output" -eq 1; then AC_MSG_NOTICE(apr LDFLAGS: $APR_LDFLAGS); fi
-    APR_LDADD="`${APR_CONFIG} --link-libtool`"
+    APR_LDADD="`${APR_CONFIG} --link-ld`"
     if test "$verbose_output" -eq 1; then AC_MSG_NOTICE(apr LDADD: $APR_LDADD); fi
 else
     AC_MSG_RESULT([no])
--- ./build/find_apu.m4.orig	2012-08-28 14:23:39.000000000 +0400
+++ ./build/find_apu.m4	2012-08-28 14:23:45.000000000 +0400
@@ -58,7 +58,7 @@
     if test "$verbose_output" -eq 1; then AC_MSG_NOTICE(apu CFLAGS: $APU_CFLAGS); fi
     APU_LDFLAGS="`${APU_CONFIG} --libs`"
     if test "$verbose_output" -eq 1; then AC_MSG_NOTICE(apu LDFLAGS: $APU_LDFLAGS); fi
-    APU_LDADD="`${APU_CONFIG} --link-libtool`"
+    APU_LDADD="`${APU_CONFIG} --link-ld`"
     if test "$verbose_output" -eq 1; then AC_MSG_NOTICE(apu LDADD: $APU_LDADD); fi
 else
     AC_MSG_RESULT([no])
